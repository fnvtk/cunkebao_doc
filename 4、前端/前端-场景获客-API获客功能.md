# 场景获客-API获客功能说明

## 一、功能简介
API获客是通过开放标准化API接口，允许第三方系统、业务平台、外部应用等将客户线索、用户数据实时推送到存客宝系统，实现自动化客户入库、标签分组、分销返利、数据统计等全流程管理。适用于渠道合作、平台对接、自动化营销等多种场景。

### API获客功能前端流程图

```mermaid
graph TD
    A[配置API接入参数/密钥] --> B{外部系统推送客户数据 (API调用)};
    B --> C[系统接收/初步校验数据];
    C --> D[数据处理/入库/打标签];
    D --> E[自动触发分销/红包/欢迎语];
    E --> F[数据统计/报表更新];
    F --> G[前端展示API获客结果];
    C -- 校验失败 --> H[错误提示/日志记录];
    H --> G;
```

## 二、主要功能模块

### 1. API接入与鉴权
- 提供标准化API接口，支持POST方式推送客户线索。
- 支持API密钥、Token等多种鉴权方式，保障数据安全。
- 支持多渠道、多业务线独立配置API接入参数。

### 2. 客户线索推送与入库
- 支持批量或单条推送客户信息（如手机号、微信号、姓名、来源、标签等）。
- 推送成功后自动入库，支持去重、格式校验、黑名单过滤。
- 可配置自动分配标签、分组、分销层级。

### 3. 分销返利与自动化任务
- 支持API推送线索自动绑定分销关系，自动计算返利。
- 可配置自动发放红包、推送欢迎语、触发自动化任务等。
- 分销与红包数据实时同步。

### 4. 数据统计与追踪
- 实时统计API获客总量、有效数、无效数、分销返利、红包发放等。
- 支持多维度筛选和分析。
- 数据可视化展示（折线图、柱状图等）。

### 5. 灵活集成与权限
- 支持多业务线、多渠道灵活配置和管理API接入。
- 首页入口、数据区块等支持权限控制和自定义显示。

---

## 三、前端开发要点
- 直接复用 scenarioApi（/api/scenarios）相关接口进行API获客场景的创建、数据统计、客户入库等。
- 支持API接入参数配置、密钥管理、推送日志、数据回溯等页面。
- 组件建议拆分：API接入配置、推送日志、数据统计、分销返利、红包池、客户入库、自动化任务配置。
- 用 Shadcn UI + Tailwind CSS 实现表单、配置、数据统计、权限控制等页面。
- 所有加载过程用骨架屏（Skeleton）提升体验。
- 数据可视化建议用 Chart.js/Echarts 实现。
- 首页入口、数据区块、分销返利、红包池等支持权限控制和自定义显示。

---

## 四、接口说明
- 创建API获客场景：POST /api/scenarios
- 查询API获客场景列表：GET /api/scenarios
- 获取API获客场景详情：GET /api/scenarios/{id}
- 推送客户线索（API对接）：POST /api/scenarios/{id}/records
- 获取获客记录：GET /api/scenarios/{id}/records
- 导出获客记录：GET /api/scenarios/{id}/records/export
- 获取场景统计数据：GET /api/scenarios/{id}/stats
- 批量更新标签：POST /api/scenarios/{id}/tags

---

## 五、相关前端UI图片

以下是与API获客功能相关的部分前端UI截图，帮助理解用户界面：

### 场景获客 - API获客入口与配置 (示意图)

![场景获客](../4、前端/UI/场景获客.png)

> 本文档持续更新，已结合现有API能力和业务需求，后续如有功能调整请及时补充。 