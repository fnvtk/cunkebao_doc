# 📚 存客宝开发文档

> 📅 最后更新：2026-01-11
> 📋 版本：v3.0.0
> 🏢 项目：存客宝私域运营管理系统

---

## 🎯 项目简介

**存客宝**是一套面向企业的私域运营自动化系统，通过"AI + 私域"的技术路线，帮助企业实现客户获取、培育、转化的全流程自动化。

### 产品矩阵

| 产品 | 定位 | 技术栈 | 访问地址 |
|------|------|--------|----------|
| **存客宝** | 管理后台 | React + TypeScript | https://kr-op.quwanzhi.com/ |
| **触客宝** | 客服聊天 | React + TypeScript | https://kr-kf.quwanzhi.com/ |
| **AI数智员工** | AI助手 | Vue + UniApp | https://kr-phone.quwanzhi.com/ |

### 核心功能

- 🎯 **设备管理**：管理接入的手机设备
- 💬 **微信管理**：管理微信号、好友、群聊
- 📚 **内容库**：管理营销内容素材
- ⚙️ **工作台**：自动建群、消息群发、朋友圈同步
- 👥 **流量池**：流量标签、智能分发
- 💰 **分销管理**：渠道管理、佣金结算
- 📊 **数据中心**：数据分析、报表导出

---

## 📁 文档目录

```
开发文档/
├── 1、需求/                    # 需求文档
│   ├── 业务需求.md             # 业务功能需求（完整）
│   ├── 技术需求.md             # 技术架构需求（完整）
│   ├── 成本.md                 # 成本与商业规划（完整）
│   └── 运营规范.md             # 运营规范与系统对接（新增）
│
├── 2、架构/                    # 架构设计
│   ├── 系统架构.md             # 整体系统架构
│   ├── 技术选型.md             # 技术栈选型
│   ├── 核心业务链路.md         # 业务流程详解
│   ├── 核心算法与价值功能.md   # 核心算法详解
│   ├── 核心代码索引.md         # 重要代码索引
│   ├── 自动化工作流.md         # 任务调度详解
│   ├── 解决方案对比与优化建议.md # 优化建议
│   └── 数据库.md               # 数据库设计
│
├── 3、原型/                    # 原型设计
│   └── 原型设计规范.md         # UI/UX 设计规范（完整）
│
├── 4、前端/                    # 前端开发
│   └── 前端开发规范.md         # 前端代码规范
│
├── 5、接口/                    # API 文档
│   └── 接口定义规范.md         # API 设计规范
│
├── 6、后端/                    # 后端开发
│   └── 后端开发规范.md         # 后端代码规范
│
├── 7、数据库/                  # 数据库
│   └── 数据库管理规范.md       # 数据库设计规范
│
├── 8、部署/                    # 部署运维
│   ├── Next.js自动化部署流程.md
│   └── 基于GitHub Webhook与宝塔面板的自动化部署流程文档.md
│
├── 9、手册/                    # 开发手册
│   └── 提示词/                 # AI 提示词
│
├── 10、使用手册/               # 用户手册
│   ├── 存客宝新功能使用手册.md # 功能使用说明（完整）
│   └── 截图/                   # 功能截图
│
└── README.md                   # 本文档
```

---

## 🚀 快速开始

### 1. 了解项目（必读）

| 文档 | 说明 | 阅读时间 | 五行归属 |
|------|------|----------|----------|
| [业务需求](1、需求/业务需求.md) | 了解产品功能、用户角色、核心模块 | 20分钟 | 金 |
| [成本规划](1、需求/成本.md) | 了解团队架构、预算、收入模型 | 15分钟 | 土 |
| [运营规范](1、需求/运营规范.md) | 了解运营岗位、SOP、与系统对接 | 15分钟 | 火 |

### 2. 深入技术

| 文档 | 说明 | 阅读时间 |
|------|------|----------|
| [系统架构](2、架构/系统架构.md) | 了解技术架构 | 20分钟 |
| [技术选型](2、架构/技术选型.md) | 了解技术栈 | 10分钟 |
| [核心业务链路](2、架构/核心业务链路.md) | 业务流程详解 | 20分钟 |
| [核心算法](2、架构/核心算法与价值功能.md) | 核心算法详解 | 30分钟 |
| [自动化工作流](2、架构/自动化工作流.md) | 任务调度详解 | 20分钟 |

### 3. 开始开发

| 文档 | 说明 | 阅读时间 |
|------|------|----------|
| [前端开发规范](4、前端/前端开发规范.md) | 前端代码规范 | 15分钟 |
| [后端开发规范](6、后端/后端开发规范.md) | 后端代码规范 | 15分钟 |
| [接口定义规范](5、接口/接口定义规范.md) | API 设计规范 | 15分钟 |
| [原型设计规范](3、原型/原型设计规范.md) | UI/UX 设计规范 | 15分钟 |

---

## 🏗️ 技术架构

### 整体架构图

```
┌─────────────────────────────────────────────────────────────────────┐
│                           客户端层                                   │
├─────────────┬─────────────┬─────────────┬─────────────┬─────────────┤
│  Cunkebao   │ Touchkebao  │ SuperAdmin  │  Store_vue  │  aiApp/ckApp│
│  (React)    │  (React)    │  (Next.js)  │  (UniApp)   │  (UniApp)   │
└──────┬──────┴──────┬──────┴──────┬──────┴──────┬──────┴──────┬──────┘
       │             │             │             │             │
       └─────────────┴─────────────┴─────────────┴─────────────┘
                                   │
                                   ▼
┌─────────────────────────────────────────────────────────────────────┐
│                           API 网关层 (Nginx)                         │
└─────────────────────────────────┬───────────────────────────────────┘
                                  │
       ┌──────────────────────────┼──────────────────────────┐
       ▼                          ▼                          ▼
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│     Server      │    │     Moncter     │    │   WebSocket     │
│   (ThinkPHP)    │    │    (Webman)     │    │  (GatewayWorker)│
└────────┬────────┘    └────────┬────────┘    └────────┬────────┘
         │                      │                      │
         └──────────────────────┼──────────────────────┘
                                │
       ┌────────────────────────┼────────────────────────┐
       ▼                        ▼                        ▼
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│     MongoDB     │    │      MySQL      │    │      Redis      │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

### 技术栈

| 层级 | 技术 | 版本 |
|------|------|------|
| 前端 | React + TypeScript | 18.x + 5.x |
| 前端 | Next.js | 14.x |
| 前端 | Vue + UniApp | 3.x |
| 后端 | PHP + ThinkPHP | 7.4 + 5.1 |
| 后端 | PHP + Webman | 8.1 + 2.x |
| 数据库 | MongoDB | 5.x |
| 数据库 | MySQL | 5.7+ |
| 缓存 | Redis | 6.x |

---

## 💎 核心算法

### 六大核心算法

| 算法 | 文件 | 核心价值 |
|------|------|----------|
| **健康分算法** | `WechatAccountHealthScoreService.php` | 风控核心，保护账号 |
| **RFM算法** | `RFMController.php` | 客户分层，精准营销 |
| **流量分发算法** | `WorkbenchTrafficDistributeJob.php` | 负载均衡，自动分配 |
| **分销奖励算法** | `DistributionRewardService.php` | 渠道激励，收益计算 |
| **消息群发算法** | `WorkbenchGroupPushJob.php` | 批量触达，去重限频 |
| **自动建群算法** | `WorkbenchGroupCreateJob.php` | 社群运营，批量建群 |

### 健康分公式

```
健康分 = 基础分(60-100) + 动态分
每日最大加人次数 = 健康分 × 0.2
```

### RFM公式

```
RFM总分 = R分×0.4 + F分×0.3 + M分×0.3
标准分 = (RFM总分 - 最小分) / (最大分 - 最小分) × 99 + 1
```

---

## 👥 团队架构

### 组织架构图

```
                        ┌─────────────────┐
                        │   项目主理人      │
                        │    (卡若)        │
                        └────────┬────────┘
                                 │
        ┌────────────────────────┼────────────────────────┐
        │                        │                        │
        ▼                        ▼                        ▼
┌───────────────┐       ┌───────────────┐       ┌───────────────┐
│   研发团队      │       │   运营团队      │       │   渠道团队      │
├───────────────┤       ├───────────────┤       ├───────────────┤
│ 后端: 王民正   │       │ 用户运营: 1人  │       │ 合伙人: 5人   │
│ 前端: 徐永平   │       │ 内容运营: 30人 │       │              │
│ 产品: 谢远志   │       │ 矩阵管理: 1人  │       │              │
└───────────────┘       └───────────────┘       └───────────────┘
```

### 团队与系统功能映射

| 团队 | 岗位 | 主要使用功能 | KPI指标 |
|------|------|-------------|---------|
| 研发 | 后端开发 | 系统配置、任务调度 | 功能交付率、Bug率 |
| 研发 | 前端开发 | 界面开发、用户体验 | 页面性能、用户满意度 |
| 研发 | 产品经理 | 需求管理、功能验收 | 需求交付率、功能质量 |
| 运营 | 用户运营 | 消息群发、流量分发 | 转化率、成交额 |
| 运营 | 内容运营 | 内容库、朋友圈同步 | 内容产出、互动率 |
| 运营 | 矩阵管理 | 设备管理、健康分 | 设备在线率、账号安全 |

---

## 📊 项目结构

```
cunkebao_v3/
├── Cunkebao/           # 主前端 (React)
├── Touchkebao/         # 触控版 (React)
├── SuperAdmin/         # 管理后台 (Next.js)
├── Store_vue/          # 门店端 (UniApp)
├── aiApp/              # AI应用 (UniApp)
├── ckApp/              # 移动应用 (UniApp)
├── Server/             # 主后端 (ThinkPHP)
├── Moncter/            # 监控服务 (Webman)
├── 开发文档/            # 开发文档
├── 周报同步/            # 周报文件
└── README.md           # 项目说明
```

---

## 💰 商业模式

### 产品矩阵报价

| 产品层级 | 产品名称 | 价格 | 核心价值 |
|----------|----------|------|----------|
| 引流品 | 免费试用7天 | 0元 | 降低门槛，建立信任 |
| 利润品 | 基础版年费 | 3,600元/年 | 3个微信号，基础功能 |
| 利润品 | 专业版年费 | 12,000元/年 | 10个微信号，全部功能 |
| 形象品 | 企业版年费 | 36,000元/年 | 不限微信号，专属服务 |

### 云阿米巴分润模式

| 原则 | 说明 |
|------|------|
| 不分股权分现金 | 避免复杂股权纠纷，用即时现金激励 |
| 按创造价值分钱 | 贡献与收益挂钩 |
| 分不属于对方的钱 | 只分增量，不动存量 |

---

## 📞 联系方式

| 联系方式 | 信息 |
|----------|------|
| 技术支持微信 | 28533368 |
| 技术支持电话 | 15880802661 |

---

## 📝 更新日志

### v3.0.0 (2026-01)

- ✅ 新增自动建群功能
- ✅ 新增分销管理功能
- ✅ 新增入群欢迎语功能
- ✅ 完善开发文档体系
- ✅ 新增运营规范文档
- ✅ 优化成本与商业规划文档
- ✅ 完善原型设计规范

### v2.0.0 (2025-10)

- ✅ 工作台功能上线
- ✅ 朋友圈同步功能
- ✅ 消息群发功能
- ✅ 流量分发功能

### v1.0.0 (2025-06)

- ✅ 基础功能上线
- ✅ 设备管理
- ✅ 微信号管理
- ✅ 内容库

---

## 📚 项目模板参考

本项目文档体系参考了「卡若五行项目模板」：

| 五行 | 模板内容 | 对应文档 |
|------|----------|----------|
| **金** | 项目架构、团队结构、股东分润 | 业务需求.md |
| **水** | 流程规划、SOP、落地方案 | 运营规范.md |
| **木** | 落地推进、产品报价、话术 | 使用手册 |
| **火** | 运营迭代、KPI考核、复盘 | 运营规范.md |
| **土** | 投资裂变、预算、营收测算 | 成本.md |

---

*本文档由存客宝团队维护*
