# æ¥å£å®šä¹‰è§„èŒƒ

> ğŸ“… æœ€åæ›´æ–°ï¼š2026-01-11
> ğŸ“‹ åŸºäºé¡¹ç›®æºç é€†å‘åˆ†æç”Ÿæˆ

---

## ğŸ“‹ æ¥å£è§„èŒƒ

### åŸºç¡€ä¿¡æ¯

| é¡¹ç›® | è¯´æ˜ |
|------|------|
| **åŸºç¡€URL** | `https://api.domain.com` |
| **APIç‰ˆæœ¬** | `/v1` |
| **åè®®** | HTTPS |
| **æ•°æ®æ ¼å¼** | JSON |
| **å­—ç¬¦ç¼–ç ** | UTF-8 |

### è¯·æ±‚å¤´

```http
Content-Type: application/json
Authorization: Bearer {token}
X-Request-Id: {uuid}
```

### ç»Ÿä¸€å“åº”æ ¼å¼

```json
{
  "code": 200,           // çŠ¶æ€ç 
  "message": "success",  // æ¶ˆæ¯
  "data": {},            // æ•°æ®
  "time": 1704931200     // æ—¶é—´æˆ³
}
```

### çŠ¶æ€ç å®šä¹‰

| çŠ¶æ€ç  | è¯´æ˜ |
|--------|------|
| 200 | æˆåŠŸ |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 401 | æœªæˆæƒ/Tokenå¤±æ•ˆ |
| 403 | æ— æƒé™ |
| 404 | èµ„æºä¸å­˜åœ¨ |
| 500 | æœåŠ¡å™¨é”™è¯¯ |

---

## ğŸ” è®¤è¯æ¥å£

### ç™»å½•

```http
POST /v1/auth/login
```

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "username": "string",  // ç”¨æˆ·åæˆ–æ‰‹æœºå·
  "password": "string",  // å¯†ç 
  "type_id": 1           // ç™»å½•ç±»å‹
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIs...",
    "expire_time": 1704931200,
    "user_info": {
      "id": 1,
      "username": "admin",
      "nickname": "ç®¡ç†å‘˜",
      "avatar": "https://..."
    }
  }
}
```

### åˆ·æ–°Token

```http
POST /v1/auth/refresh
```

---

## ğŸ“± è®¾å¤‡ç®¡ç†æ¥å£

### è·å–è®¾å¤‡åˆ—è¡¨

```http
GET /v1/devices
```

**è¯·æ±‚å‚æ•°**ï¼š
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| page | int | å¦ | é¡µç ï¼Œé»˜è®¤1 |
| limit | int | å¦ | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤20 |
| status | int | å¦ | çŠ¶æ€ç­›é€‰ |
| keyword | string | å¦ | å…³é”®è¯æœç´¢ |

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "list": [
      {
        "id": 1,
        "name": "è®¾å¤‡1",
        "device_id": "DEVICE_001",
        "status": 1,
        "online_status": 1,
        "wechat_count": 3,
        "created_at": "2026-01-01 10:00:00"
      }
    ],
    "total": 100,
    "page": 1,
    "limit": 20
  }
}
```

### è·å–è®¾å¤‡è¯¦æƒ…

```http
GET /v1/devices/{id}
```

### æ·»åŠ è®¾å¤‡

```http
POST /v1/devices
```

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "name": "è®¾å¤‡åç§°",
  "device_id": "è®¾å¤‡ID",
  "group_id": 1
}
```

### æ›´æ–°è®¾å¤‡

```http
PUT /v1/devices/{id}
```

### åˆ é™¤è®¾å¤‡

```http
DELETE /v1/devices/{id}
```

---

## ğŸ‘¤ å¾®ä¿¡ç®¡ç†æ¥å£

### è·å–å¾®ä¿¡åˆ—è¡¨

```http
GET /v1/wechats
```

**è¯·æ±‚å‚æ•°**ï¼š
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| device_id | int | å¦ | è®¾å¤‡ID |
| status | int | å¦ | çŠ¶æ€ |
| keyword | string | å¦ | æœç´¢å…³é”®è¯ |

### è·å–å¾®ä¿¡è¯¦æƒ…

```http
GET /v1/wechats/{id}
```

### è·å–å¥½å‹åˆ—è¡¨

```http
GET /v1/wechats/{id}/friends
```

**è¯·æ±‚å‚æ•°**ï¼š
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| page | int | å¦ | é¡µç  |
| limit | int | å¦ | æ¯é¡µæ•°é‡ |
| tag_id | int | å¦ | æ ‡ç­¾ID |
| keyword | string | å¦ | æœç´¢å…³é”®è¯ |

### æ›´æ–°å¥½å‹ä¿¡æ¯

```http
PUT /v1/wechats/{wechat_id}/friends/{friend_id}
```

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "remark": "å¤‡æ³¨å",
  "tags": [1, 2, 3],
  "extend_fields": {}
}
```

### å¥½å‹è½¬ç§»

```http
POST /v1/wechats/friends/transfer
```

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "from_wechat_id": 1,
  "to_wechat_id": 2,
  "friend_ids": [1, 2, 3]
}
```

---

## ğŸ’¬ æ¶ˆæ¯æ¥å£

### è·å–ä¼šè¯åˆ—è¡¨

```http
GET /v1/messages/sessions
```

### è·å–èŠå¤©è®°å½•

```http
GET /v1/messages/records
```

**è¯·æ±‚å‚æ•°**ï¼š
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| wechat_id | int | æ˜¯ | å¾®ä¿¡ID |
| contact_wxid | string | æ˜¯ | è”ç³»äººwxid |
| page | int | å¦ | é¡µç  |
| limit | int | å¦ | æ¯é¡µæ•°é‡ |

### å‘é€æ¶ˆæ¯

```http
POST /v1/messages/send
```

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "wechat_id": 1,
  "to_wxid": "wxid_xxx",
  "msg_type": 1,
  "content": "æ¶ˆæ¯å†…å®¹"
}
```

---

## ğŸ“š å†…å®¹åº“æ¥å£

### è·å–å†…å®¹åˆ—è¡¨

```http
GET /v1/contents
```

### åˆ›å»ºå†…å®¹

```http
POST /v1/contents
```

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "title": "æ ‡é¢˜",
  "content": "å†…å®¹",
  "type": 1,
  "category_id": 1,
  "images": ["url1", "url2"],
  "tags": [1, 2]
}
```

### æ›´æ–°å†…å®¹

```http
PUT /v1/contents/{id}
```

### åˆ é™¤å†…å®¹

```http
DELETE /v1/contents/{id}
```

---

## ğŸ·ï¸ æµé‡æ± æ¥å£

### è·å–æµé‡æ± åˆ—è¡¨

```http
GET /v1/traffic-pools
```

### åˆ›å»ºæµé‡æ± 

```http
POST /v1/traffic-pools
```

### è·å–æ ‡ç­¾åˆ—è¡¨

```http
GET /v1/traffic-tags
```

### åˆ›å»ºæ ‡ç­¾

```http
POST /v1/traffic-tags
```

---

## ğŸ¤– å·¥ä½œå°æ¥å£

### è‡ªåŠ¨å»ºç¾¤

```http
POST /v1/workbench/auto-group
```

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "wechat_id": 1,
  "name": "ç¾¤åç§°",
  "member_wxids": ["wxid_1", "wxid_2"],
  "welcome_message": "æ¬¢è¿è¯­"
}
```

### å…¥ç¾¤æ¬¢è¿è¯­è®¾ç½®

```http
POST /v1/workbench/group-welcome
```

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "chatroom_id": "xxx@chatroom",
  "enabled": true,
  "message": "æ¬¢è¿æ–°æˆå‘˜ï¼",
  "delay": 3
}
```

### æ¶ˆæ¯ç¾¤å‘

```http
POST /v1/workbench/mass-send
```

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "wechat_id": 1,
  "target_type": "friend",
  "target_ids": [1, 2, 3],
  "messages": [
    {
      "type": "text",
      "content": "æ¶ˆæ¯å†…å®¹"
    }
  ],
  "interval": 5
}
```

### æœ‹å‹åœˆå‘å¸ƒ

```http
POST /v1/workbench/moments/publish
```

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "wechat_ids": [1, 2],
  "content": "æœ‹å‹åœˆå†…å®¹",
  "images": ["url1", "url2"],
  "location": {
    "name": "ä½ç½®åç§°",
    "lat": 39.9,
    "lng": 116.4
  }
}
```

---

## ğŸ’° åˆ†é”€æ¥å£

### è·å–åˆ†é”€å•†åˆ—è¡¨

```http
GET /v1/distribution/dealers
```

### è·å–ä½£é‡‘è®°å½•

```http
GET /v1/distribution/commissions
```

### æç°ç”³è¯·

```http
POST /v1/distribution/withdraw
```

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "amount": 100.00,
  "account_type": "wechat",
  "account_info": {}
}
```

---

## ğŸ“Š æ•°æ®ç»Ÿè®¡æ¥å£

### è·å–æ¦‚è§ˆæ•°æ®

```http
GET /v1/statistics/overview
```

### è·å–è¶‹åŠ¿æ•°æ®

```http
GET /v1/statistics/trends
```

**è¯·æ±‚å‚æ•°**ï¼š
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| start_date | string | æ˜¯ | å¼€å§‹æ—¥æœŸ |
| end_date | string | æ˜¯ | ç»“æŸæ—¥æœŸ |
| type | string | å¦ | ç»Ÿè®¡ç±»å‹ |

---

## ğŸ“¤ æ–‡ä»¶ä¸Šä¼ æ¥å£

### ä¸Šä¼ å›¾ç‰‡

```http
POST /v1/upload/image
```

**è¯·æ±‚å‚æ•°**ï¼š
- Content-Type: multipart/form-data
- file: å›¾ç‰‡æ–‡ä»¶

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "url": "https://cdn.domain.com/xxx.jpg",
    "width": 800,
    "height": 600
  }
}
```

### ä¸Šä¼ æ–‡ä»¶

```http
POST /v1/upload/file
```

**é™åˆ¶**ï¼š
- æœ€å¤§æ–‡ä»¶å¤§å°ï¼š50MB
- æ”¯æŒæ ¼å¼ï¼šjpg, png, gif, mp4, pdf, xlsx, docx

---

## âš ï¸ é”™è¯¯ç å®šä¹‰

| é”™è¯¯ç  | è¯´æ˜ |
|--------|------|
| 10001 | å‚æ•°ç¼ºå¤± |
| 10002 | å‚æ•°æ ¼å¼é”™è¯¯ |
| 20001 | ç”¨æˆ·ä¸å­˜åœ¨ |
| 20002 | å¯†ç é”™è¯¯ |
| 20003 | Tokenè¿‡æœŸ |
| 30001 | è®¾å¤‡ä¸å­˜åœ¨ |
| 30002 | è®¾å¤‡ç¦»çº¿ |
| 40001 | å¾®ä¿¡è´¦å·ä¸å­˜åœ¨ |
| 40002 | å¾®ä¿¡æœªç™»å½• |
| 50001 | ä»»åŠ¡åˆ›å»ºå¤±è´¥ |
| 50002 | ä»»åŠ¡æ‰§è¡Œå¤±è´¥ |
